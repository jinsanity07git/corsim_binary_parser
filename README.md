# corsim_binary_parser

<img src="doc/corsim.jpg" alt="corsim" style="zoom:70%;" />

> The TSD (time-step data file) is created by CORSIM and contains the positions and speeds of all vehicles in the CORSIM network. CORSIM creates a TSD file as it runs. When finished, programs like TRAFVU can read the TSD file, permitting visual review of the inner workings of the simulation.
>
> ----  Dr. John Leonard
> Virginia Commonwealth University

## Intro

This repo contains a renewed python script to interpret the TSD file generated by CORSIM. It provides students hands-on experience on what information the time-step data file contains, how it is structured and encrypted. The student interested in the underlying simulation coding could use the parsed time-step CSV file to create the time-step frames and play an animation.

## Acknowledgment 

The general decryption idea is mentored by Dr. John Leonard. His source code inspires the output format in [source-forge](https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsourceforge.net%2Fp%2Fcortools%2Fcode%2FHEAD%2Ftree%2Ftrunk%2Fcortools%2F&data=02|01|zihaojin%40uwm.edu|bc4398ae54db41d5d3d208d83eb66cdd|0bca7ac3fcb64efd89eb6de97603cf21|0|1|637328300528047039&sdata=76s2kKEFMmhit4m9hhTN0aLxYNMR20iVpl5QwtG415M%3D&reserved=0). 

## Guidance

The source of the file is located in [TRAFVU V1.4](doc/FileDescription.pdf), with the repository structure shown as below:

```
├── doc
│   ├── FileDescription.pdf
│   └── config
│       ├── message_content.csv  
│       └── message_content.xls
├── input  // folder contains some sample inputs
│   ├── 4leg.ts0
│   ├── CapOkland.tid
│   └── CapOkland.ts0
├── output // output csv file would be drieted here
│   ├── CapOkland.csv
└── parser_csv.py

```

The developer or user needs to run the parser_csv.py by setting the proper input file name and other parameters.



